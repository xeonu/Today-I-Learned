# 로그인 방식(쿠키, 세션, JWT)
웹서비스에서 로그인 방식은 크게 **쿠키**, **세션**, **JWT** 3가지 방식으로 구현할 수 있다. 물론 그 외에 OAuth와 같은 방식도 존재한다.

## 쿠키로 구현한 로그인

로그인시 클라이언트 측에서 id와 password를 입력받는다. 클라이언트는 쿠키에 id와 password를 담아 서버에게 전송한다. 서버에는 해당 id와 password가 맞아 로그인이 성공했다는 것을 다시 쿠키로 전송해준다.

쿠키정보가 탈취되면 바로 사용자 정보가 탈취될 수 있고, 쿠키는 임의로 수정이 가능하기 때문에 누구나 다른 사용자인 것처럼 로그인 할 수 있다. 또 쿠키는 담을 수 있는 데이터의 크기가 제한적이다. 이러한 이유 때문에 쿠키에 회원정보를 담아 로그인을 유지하는 것은 지양해야한다.

## 세션으로 구현한 로그인
쿠키로 구현한 로그인 방식은 매번 쿠키에 id와 password를 담아서 전송해야했다. 이와 다르게 세션으로 구현한 방식은 클라이언트에서 로그인 정보를 담아 서버로 전송하면 서버에서 확인절차를 거친 후 해당 유저의 세션을 생성한다. 생성한 JSESSIONID만 쿠키에 담아 전송하여 로그인을 유지한다. 쿠키가 탈취되었더라도 민감한 정보는 들어있지 않아서 안전하다.

하지만 JSESSIONID를 탈취당하면 다른 사용자인 척 위장할 수 있다. 또 서버에 세션 저장소를 사용해야하고 매번 쿠키에 들어있는 JSESSIONID가 일치한지 확인해야 하므로 I/O가 많이 발생한다.

## 토큰(JWT)으로 구현한 로그인
클라이언트가 로그인 정보를 서버에게 전달하면 서버는 클라이언트에게 유저 정보를 적절히 암호화하여 토큰을 발급한다. 해당 토큰만 가지고 있으면 서버는 로그인된 클라이언트라는 것을 파악할 수 있다. 

JWT 토큰의 내부를 들여다 보면 암호화 방식과 토큰타입을 선언한 **Header**, 사용자 id와 같이 공개되도 지장없는 정보를 담은 **Payload**, 그리고 이 둘을 조합하여 SHA256으로 암호화한 **Verify Signature**로 이루어져 있다. 

SHA256은 단방향 해시함수로 decoding이 불가능하다. 그리고 Header와 Payload를 수정하면 해시값인 Verigy Signature도 변하므로 변조가 어렵다. 불필요하게 세션에서 클라이언트 정보를 조회하지 않아도 되므로 I/O가 줄어든다.

JWT의 단점을 고르자면 쿠키에 담아야할 토큰의 데이터 크기가 다른 방식에 비해 크다. 또 로그아웃을 할 때 세션으로 구현한 로그인방식은 세션스토리지에서 세션정보만 지우면 되는데 토큰은 생명주기를 지정해주는 식의 방식으로 구현해야한다. 
